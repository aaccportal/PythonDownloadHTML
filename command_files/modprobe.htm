<!DOCTYPE html>
<!--[if lt IE 7]><html class="ie6 ie"><![endif]--><!--[if IE 7]><html class="ie7 ie"><![endif]--><!--[if IE 8]><html class="ie8 ie"><![endif]--><!--[if IE 9]><html class="ie9 ie"><![endif]-->
<html lang="en" itemscope itemtype="https://schema.org/WebPage">

<body>
<div class="skip"><a href="#main-content">Skip to Main Content</a></div>
<div class="wrapper">
<header class="cf"><a href="/"><picture><source srcset="/cdn/computer-hope-dark.png" media="(prefers-color-scheme: dark)" class="logo"><img src="/cdn/computer-hope.jpg" width="412" height="82" alt="Computer Hope" aria-label="Computer Hope home page" class="logo"></picture></a><div itemscope itemtype="https://schema.org/SiteNavigationElement"><form action="https://www.computerhope.com/cgi-bin/search.cgi" role="search" method="post"><input class="sbar" name="q" aria-label="search" type="text" /><button type="Submit">Search</button></form><nav><ul id="nav"><li><a href="/oh.htm" title="Questions and answers, troubleshooting, and help">Help</a></li><li><a href="/tips/" title="Computer tips and tricks">Tips</a></li><li><a href="/jargon.htm" title="Computer terms, jargon, and glossary">Dictionary</a></li><li><a href="/history/" title="Computer timeline, events, and biographies">History</a></li><li><a href="/forum/" title="Computer Hope forums and community">Forums</a></li><li><a href="/contact/" title="Contact Computer Hope or other computer companies">Contact</a></li></ul></nav></div></header>
<div class="container ad" aria-hidden="true">
<ins class="adsbygoogle" data-ad-client="ca-pub-3999293766533555" data-ad-format="auto" data-ad-slot="7994873325" style="display:block"></ins>
<script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
</div>
<nav class="container" aria-label="breadcrumb"><ol class="breadcrumbs" itemscope itemtype="https://schema.org/BreadcrumbList"><li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/" itemprop="item"><span itemprop="name">Home</span></a><meta itemprop="position" content="1" /></li><li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/oh.htm" itemprop="item"><span itemprop="name">Help</span></a><meta itemprop="position" content="2" /></li><li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/unix.htm" itemprop="item"><span itemprop="name">Linux</span></a><meta itemprop="position" content="3" /></li></ol></nav>
<div class="container content" id="main-content" role="main">
<article>
<h1 itemprop="headline">Linux modprobe command</h1>
<div class="updated">Updated: <span itemprop="dateModified" content="2021-03-13">03/13/2021</span> by <span itemprop="author publisher creator" itemscope itemtype="https://schema.org/Organization"><span itemprop="name">Computer Hope</span></span></div>
<img src="/cdn/linux/modprobe.gif" width="300" height="300" alt="modprobe command" class="floatRight"><p class="intro">On Linux operating systems, the <b>modprobe</b> command adds and removes <a href="/jargon/m/module.htm">modules</a> from the Linux <a href="/jargon/k/kernel.htm">kernel</a>.</p>
<div class="pagenav contents" role="navigation" aria-label="contents">
<ul>
<li><a href="#desc">Description</a></li>
<li><a href="#syntax">Syntax</a></li>
<li><a href="#examples">Examples</a></li>
<li><a href="#related">Related commands</a></li>
<li class="out"><a href="/unix.htm">Linux commands help</a></li>
</ul>
</div>
<h2 id="desc">Description</h2>
<p class="tab">Modules are pieces of code which extend the functionality of the operating system kernel without the need to <a href="/jargon/r/reboot.htm">reboot</a>. Once loaded, modules reside in <a href="/jargon/m/memory.htm">memory</a>, and can be instantiated multiple times; they can be thought of as analogous to a <a href="/jargon/d/driver.htm">device driver</a>.</p>
<p class="tab"><b>modprobe</b> uses the dependency lists and hardware maps generated by <a href="/unix/depmod.htm"><b>depmod</b></a> to intelligently load or unload modules into the kernel. It performs the actual insertion and removal using the lower-level programs <a href="/unix/insmod.htm"><b>insmod</b></a> and <a href="/unix/rmmod.htm"><b>rmmod</b></a>, respectively.</p>
<p class="tab">While it's possible to call <b>insmod</b> and <b>rmmod</b> manually, we recommend to load and unload modules using <b>depmod</b> to ensure that any inter-module dependencies are considered before changes are made.</p>
<h3 class="tab">Technical description</h3>
<p class="tab"><b>modprobe</b> searches the module <a href="/jargon/d/director.htm">directory</a>,</p>
<pre class="tab">/lib/modules/&#96;uname -r&#96;</pre>
<p class="tab">for all the modules and other files, except for the optional configuration files in the <b>/etc/modprobe.d</b> directory. <b>modprobe</b> also uses module options specified on the kernel <a href="/jargon/c/commandi.htm">command line</a> in the form of:</p>
<pre class="tab">&lt;module&gt;.&lt;option&gt;</pre>
<p class="tab">...and blacklists in the form of:</p>
<pre class="tab">modprobe.blacklist=&lt;module&gt;</pre>
<p class="tab">Modern versions of Linux modprobe (post-kernel version 2.4.x) do not modify modules themselves. The work of resolving <a href="/jargon/s/symbol.htm">symbols</a> and understanding <a href="/jargon/p/paramete.htm">parameters</a> is done inside the kernel. Module failure is therefore sometimes accompanied by a kernel message &mdash; see <a href="/unix/dmesg.htm"><b>dmesg</b></a> for more information about viewing them.</p>
<p class="tab">modprobe expects an up-to-date <b>modules.dep.bin</b> file (or fallback human readable <b>modules.dep</b> file), as generated by the <b>depmod</b> utility. This file lists what other modules each module needs (if any), and <b>modprobe</b> uses this to add or remove these dependencies automatically.</p>
<p class="tab">If any <a href="/jargon/a/argument.htm">arguments</a> are given after the <i>modulename</i>, they are passed to the kernel (in addition to any options listed in the configuration file).</p>
<h2 id="syntax">Syntax</h2>
<pre class="tcy tab">modprobe [-v] [-V] [-C <i>config-file</i>] [-n] [-i] [-q] [-b] [<i>modulename</i>] 
         [<i>module parameters</i>...]</pre>
<pre class="tcy tab">modprobe [-r] [-v] [-n] [-i] [<i>modulename</i>...]</pre>
<pre class="tcy tab">modprobe [-c]</pre>
<pre class="tcy tab">modprobe [--dump-modversions] [<i>filename</i>]</pre>
<h3 class="tab">Options</h3>
<table class="mtable4 tab">
<tr class="tcw">
<td style="width:210px"><b>-a</b>, <b>--all</b></td>
<td>Insert all module names on the command line.</td>
</tr>
<tr class="tcw">
<td><b>-b</b>,<b>--use-blacklist</b></td>
<td>This option causes <b>modprobe</b> to apply the blacklist commands in the configuration files (if any) to module names as well. (Any module which has been blacklisted is not automatically loaded.)</td>
</tr>
<tr class="tcw">
<td><b>-C</b>, <b>--config</b></td>
<td>This option overrides the default configuration directory (<b>/etc/modprobe.d</b>).<br><br>This option is passed through install or remove commands to other <b>modprobe</b> commands in the <b>MODPROBE_OPTIONS</b> <a href="/jargon/e/envivari.htm">environment variable</a>.</td>
</tr>
<tr class="tcw">
<td><b>-c</b>, <b>--showconfig</b></td>
<td>Dump out the effective configuration from the config directory and exit.</td>
</tr>
<tr class="tcw">
<td><b>--dump-modversions</b></td>
<td>Print out a list of module versioning information required by a module. This option is commonly used by <a href="/jargon/v/variant.htm">distributions</a> to package up a Linux kernel module using module versioning deps.</td>
</tr>
<tr class="tcw">
<td><b>-d</b>, <b>--dirname</b></td>
<td>Directory where modules are found (<b>/lib/modules/&#96;uname -r&#96;</b> by default).</td>
</tr>
<tr class="tcw">
<td><b>--first-time</b></td>
<td>Normally, <b>modprobe</b> succeeds (and does nothing) if told to insert a module that is already present, or remove a module which isn't present. This is ideal for simple scripts; however, more complicated scripts often want to know whether <b>modprobe</b> really did something: this option makes <b>modprobe</b> fail in the case that it actually didn't do anything.</td>
</tr>
<tr class="tcw">
<td><b>--force-vermagic</b></td>
<td>Every module contains a small string containing important information, such as the kernel and <a href="/jargon/c/compile.htm">compiler</a> versions. If a module fails to load and the kernel complains that the &quot;version magic&quot; doesn't match, you can use this option to remove it. This applies to any modules inserted: the module (or alias) on the command line and any modules on which it depends.<br><br> This check is there for your protection, so this using option is dangerous unless you know what you're doing.<br><br></td>
</tr>
<tr class="tcw">
<td><b>--force-modversion</b></td>
<td>When modules are compiled with <b>CONFIG_MODVERSIONS</b> set, a section detailing the versions of every interfaced used by (or supplied by) the module is created. If a module fails to load and the kernel complains that the module disagrees about a version of some interface, you can use <b>--force-modversion</b> to remove the version information altogether. This applies to any modules inserted: the module (or alias) on the command line and any modules on which it depends.<br><br> This check is there for your protection, so using this option is dangerous unless you know what you're doing.</td>
</tr>
<tr class="tcw">
<td><b>-f</b>, <b>--force</b></td>
<td>Try to strip any versioning information from the module which might otherwise stop it from loading: this is the same as using both <b>--force-vermagic</b> and <b>--force-modversion</b>. This applies to any modules inserted: the module (or alias) on the command line and any modules it on which it depends.<br><br> These checks are there for your protection, so using this option is dangerous unless you know what you are doing.</td>
</tr>
<tr class="tcw">
<td><b>-i</b>,<br> <b>--ignore-install</b>,<br> <b>--ignore-remove</b></td>
<td>This option causes <b>modprobe</b> to ignore <b>install</b> and <b>remove</b> commands in the configuration file (if any) for the module specified on the command line (any dependent modules are still subject to commands set for them in the configuration file). Both install and remove commands currently are ignored when this option is used regardless of whether the request was more specifically made with only one or other (and not both) of <b>--ignore-install</b> or <b>--ignore-remove</b>.</td>
</tr>
<tr class="tcw">
<td><b>-n</b>, <b>--dry-run</b>, <b>--show</b></td>
<td>This option does everything but actually insert or delete the modules (or run the <b>install</b> or <b>remove</b> commands). Combined with <b>-v</b>, it is useful for debugging. For historical reasons both <b>--dry-run</b> and <b>--show</b> actually mean the same thing and are interchangeable.</td>
</tr>
<tr class="tcw">
<td><b>-q</b>, <b>--quiet</b></td>
<td>With this flag, <b>modprobe</b> won't print an error message if you try to remove or insert a module it can't find (and isn't an alias or <b>install</b>/<b>remove</b> command). However, it still returns with a non-zero exit status. The kernel uses this to opportunistically probe for modules which might exist using <b>request_module</b>.</td>
</tr>
<tr class="tcw">
<td><b>-R</b>, <b>--resolve-alias</b></td>
<td>Print all module names matching an alias. This can be useful for debugging module alias problems.</td>
</tr>
<tr class="tcw">
<td><b>-r --remove</b></td>
<td>This option causes <b>modprobe</b> to remove rather than insert a module. If the modules it depends on are also unused, <b>modprobe</b> tries to remove them too. Unlike insertion, more than one module can be specified on the command line (it does not make sense to specify module parameters when removing modules).<br><br> There is usually no reason to remove modules, but some buggy modules require it. Your distribution kernel may not be built to support removal of modules at all.</td>
</tr>
<tr class="tcw">
<td><b>-S</b>, <b>--set-version</b></td>
<td>Set the kernel version, rather than using <a href="/unix/uuname.htm"><b>uname</b></a> to decide on the kernel version (which dictates where to find the modules).</td>
</tr>
<tr class="tcw">
<td><b>--show-depends</b></td>
<td>List the dependencies of a module (or alias), including the module itself. This produces a (possibly empty) set of module <a href="/jargon/f/filename.htm">file names</a>, one per line, each starting with &quot;insmod&quot; and is often used by distributions to determine which modules to include when generating initrd/initramfs images. Install commands which apply are shown prefixed by &quot;install&quot;. It does not run any of the install commands. Note that <a href="/unix/modinfo.htm"><b>modinfo</b></a> can extract dependencies of a module from the module itself, but knows nothing of aliases or install commands.</td>
</tr>
<tr class="tcw">
<td><b>-s</b>, <b>--syslog</b></td>
<td>This option causes any error messages to go through the <a href="/jargon/s/syslog.htm">syslog</a> mechanism (as <b>LOG_DAEMON</b> with level <b>LOG_NOTICE</b>) rather than to standard error. This is also automatically enabled when stderr is unavailable.<br><br> This option is passed through install or remove commands to other <b>modprobe</b> commands in the <b>MODPROBE_OPTIONS</b> environment variable.</td>
</tr>
<tr class="tcw">
<td><b>-V</b>, <b>--version</b></td>
<td>Show <b>modprobe</b>'s version information and exit.</td>
</tr>
<tr class="tcw">
<td><b>-v</b>, <b>--verbose</b></td>
<td><a href="/jargon/v/verbose.htm">Verbose</a> mode; print messages about what the program is doing. Usually <b>modprobe</b> only prints messages if something goes wrong.<br><br> This option is passed through install or remove commands to other <b>modprobe</b> commands in the <b>MODPROBE_OPTIONS</b> <a href="/jargon/e/envivari.htm">environment variable</a>.</td>
</tr>
</table>
<h2 id="examples">Examples</h2>
<p class="tab">The following series of commands illustrate a common way to use <b>modprobe</b>. Each command is prefixed with <a href="/unix/sudo.htm"><b>sudo</b></a>, as they require <a href="/jargon/r/root.htm">root</a> permissions:</p>
<pre class="tcy tab">sudo ln -s /path/to/your-kernel-module.ko /lib/modules/&#96;uname -r&#96;</pre>
<pre class="tcy tab">sudo depmod -a</pre>
<pre class="tcy tab">sudo modprobe your-kernel-module</pre>
<p class="tab">These commands perform the following operations:</p>
<ol>
<li>In the first command, we use <a href="/unix/uln.htm"><b>ln</b></a> to create a <a href="/jargon/s/symblink.htm">symbolic link</a> to our module file in the directory <b>/lib/modules/</b><i>kernel-release</i>. The command <b><a href="/unix/uuname.htm">uname -r</a></b>, enclosed in <a href="/jargon/b/backquot.htm">back quotes</a>, is executed by the shell and translates to the appropriate <a href="/jargon/s/string.htm">string</a> representing our kernel release version.</li>
<li>In the second command, an updated dependency list is generated by <b>depmod -a</b> to make sure the module we're installing is aware of all existing modules and dependencies. This dependency list is used by <b>modprobe</b> when installing the module in the third command.</li>
<li><b>modprobe</b> installs the kernel module.</li>
</ol>
<h2 id="related">Related commands</h2>
<p class="tab"><a href="/unix/depmod.htm"><b>depmod</b></a> &mdash; Generate a list of kernel module dependences and associated map files.<br><a href="/unix/insmod.htm"><b>insmod</b></a> &mdash; Insert a module into the Linux kernel.<br><a href="/unix/lsmod.htm"><b>lsmod</b></a> &mdash; Show the status of Linux kernel modules.<br><a href="/unix/modinfo.htm"><b>modinfo</b></a> &mdash; Show information about a Linux kernel module.<br><a href="/unix/rmmod.htm"><b>rmmod</b></a> &mdash; Remove a module from the Linux kernel.<br><a href="/unix/uuname.htm"><b>uname</b></a> &mdash; Print information about the current system.</p>
</article>
<div class="bottomad" aria-hidden="true">
<ins class="adsbygoogle" data-ad-client="ca-pub-3999293766533555" data-ad-format="auto" data-ad-slot="6514780129" style="display:block"></ins>
<script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
</div>
<aside><div id="meta_wrap" class="cf"><ul class="options cf"><li class="useful-page"><span class="nolink">Was this page useful?</span><a href="/cgi-bin/feedback.cgi?yes" class="first-child" rel="nofollow">Yes</a><a href="/cgi-bin/feedback.cgi?no" rel="nofollow">No</a></li><li><ul><li class="feedback"><a href="/feedback/" rel="nofollow" title="Give us your feedback about this page">Feedback</a></li><li class="email"><a href="/contact/" rel="nofollow" title="E-mail Computer Hope">E-mail</a></li><li class="share"><a href="/share/" rel="nofollow" title="Share this page with friends and social networks">Share</a></li><li class="first-child print"><a href="#" onclick="window.print();return false;" rel="nofollow" title="Print a copy of this page">Print</a></li></ul></li></ul></div></aside>
</div>
<footer><form action="https://www.computerhope.com/cgi-bin/search.cgi" role="search" method="post" class="cf"><input class="sbar" name="q" aria-label="search" type="text" /><button type="Submit">Search</button></form><div role="navigation" aria-label="footer"><ul class="cf"><li class="recent-pages"><ol><li class="ftitle">Recently added pages</li><li id="ra1"></li><li id="ra2"></li><li id="ra3"></li><li id="ra4"></li><li id="ra5"></li><li><a href="/whatnew.htm">View all recent updates</a></li></ol></li><li class="useful-links"><ol><li class="ftitle">Useful links</li><li><a href="/more.htm">About Computer Hope</a></li><li><a href="/sindex.htm">Site Map</a></li><li><a href="/forum/">Forum</a></li><li><a href="/contact/">Contact Us</a></li><li><a href="/issues/ch000586.htm">How to Help</a></li><li><a href="/chtop10.htm">Top 10 pages</a></li></ol></li><li class="social-networks"><ol><li class="ftitle">Follow us</li><li><a href="https://www.facebook.com/computerhope/" class="facebook">Facebook</a></li><li><a href="https://twitter.com/computerhope/" class="twitter">Twitter</a></li><li><a href="https://www.pinterest.com/computerhope/" class="pinterest">Pinterest</a></li><li><a href="https://www.youtube.com/user/Computerhope/" class="youtube">YouTube</a></li><li><a href="/rss.htm" class="rss">RSS</a></li></ol></li></ul></div><div class="copyright"><a href="/"><span class="blogo" title="Computer Hope home page" aria-hidden="true"></span><span class="sr">Computer Hope home page</span></a>&copy; 2022 Computer Hope<br><a href="/legal.htm" class="legal">Legal Disclaimer - Privacy Statement</a></div></footer>
</div>
<script async src="https://www.computerhope.com/ch.js"></script>
<div id="tt" aria-hidden="true"></div>
<script>(function(){var js = "window['__CF$cv$params']={r:'740a83187c0dc3d4',m:'xGUB.cXp7FFuaEyRXI6bQHzE5COuYC1l58WoK.vXlvg-1661495356-0-AUl4HonfDjkaTlqirUl76/4T59/6++YQ/lxoDCAhQYmS/e1XG9k1RNnYGrNtKioKgX5f8/A0DsTM0hxJF8xyER1Ud/4bBPGsVXjAKL+hXmcw9W3/guSiZoGC1ARoFaU/MYiRCww70sVA8edPhSYMDIQ=',s:[0xa862e29df7,0xe29546b6ee],u:'/cdn-cgi/challenge-platform/h/b'};var now=Date.now()/1000,offset=14400,ts=''+(Math.floor(now)-Math.floor(now%offset)),_cpo=document.createElement('script');_cpo.nonce='',_cpo.src='/cdn-cgi/challenge-platform/h/b/scripts/alpha/invisible.js?ts='+ts,document.getElementsByTagName('head')[0].appendChild(_cpo);";var _0xh = document.createElement('iframe');_0xh.height = 1;_0xh.width = 1;_0xh.style.position = 'absolute';_0xh.style.top = 0;_0xh.style.left = 0;_0xh.style.border = 'none';_0xh.style.visibility = 'hidden';document.body.appendChild(_0xh);function handler() {var _0xi = _0xh.contentDocument || _0xh.contentWindow.document;if (_0xi) {var _0xj = _0xi.createElement('script');_0xj.nonce = '';_0xj.innerHTML = js;_0xi.getElementsByTagName('head')[0].appendChild(_0xj);}}if (document.readyState !== 'loading') {handler();} else if (window.addEventListener) {document.addEventListener('DOMContentLoaded', handler);} else {var prev = document.onreadystatechange || function () {};document.onreadystatechange = function (e) {prev(e);if (document.readyState !== 'loading') {document.onreadystatechange = prev;handler();}};}})();</script></body>
</html>